{% extends ':layout:master.html.twig' %}
{% block customStylesheet %}
    <style xmlns="http://www.w3.org/1999/html">
        .add-new-task{
            margin: 0;
            padding-top: 7px;
        }
        #description{
            resize: vertical;
        }
    </style>
{% endblock %}
{% block content %}
    <section id="tasksd" class="clearfix">
        <div class="col-lg-12">
            <h3 class="page-header"><i class="fa fa-tasks"></i> Tasks</h3>
            <ol class="breadcrumb">
                <li><i class="fa fa-folder-open"></i><a href="index.html">Tasks</a></li>
            </ol>
        </div>
        <div class="col-md-12">
            <div class="panel-group m-bot20" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="add-new-task">
                            <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                                Add new task <i class="fa fa-plus"></i>
                            </a>
                        </h4>
                    </div>
                    <div id="collapseThree" class="panel-collapse collapse" style="height: 0px;">
                        <div class="panel-body">
                            <div class="form-group col-md-3">
                                <label for="taskTitle">Task Title</label>
                                <input type="text" id="taskTitle" class="form-control"/>
                            </div>
                            <div class="form-group col-md-3">
                                <label for="dateFrom">Date From</label>
                                <input type="date" id="dateFrom" class="form-control"/>
                            </div>
                            <div class="form-group col-md-3">
                                <label for="dateTo">Date to</label>
                                <input type="date" id="dateTo" class="form-control"/>
                            </div>
                            <div class="form-group col-md-3">
                                <label for="employees">Select Employees</label>
                                <select name="employees" id="employees" class="form-control" multiple>
                                    {% for user in users %}
                                        <option value="{{ user.id }}">{{ user.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-group col-md-12">
                                <label for="description">Description</label>
                                <textarea type="text" id="description" class="form-control"></textarea>
                            </div>
                            <div class="form-group col-md-12">
                                <button class="btn btn-success" id="saveTask">Save</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="panel">

                <table class="table table-striped table-advance table-hover">
                    <tbody>
                    <tr>
                        <th><i class="fa fa-tasks"></i> Task</th>
                        <th><i class="fa fa-calendar"></i> Date from</th>
                        <th><i class="fa fa-calendar"></i> Date to</th>
                        <th><i class="fa fa-user"></i> Assignee</th>
                        <th><i class="fa fa-info"></i> Status</th>
                        <th class="text-center"><i class="fa fa-pencil"></i> Actions</th>
                    </tr>
                    {% for task in tasks %}
                        <tr id="{{ task.id }}">
                            <td>{{ task.title }}</td>
                            <td>{{ task.createdAt|date("F d, Y") }}</td>
                            <td>{{ task.finishDate|date("F d, Y") }}</td>
                            <td>{{ task.users[0] }}</td>
                            {#<td>{{ task.status }}%</td>#}
                            <td><div class="progress progress-striped">
                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{ task.status }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ task.status }}%">
                                        <span class="sr-only">{{ task.status }}% Complete (success)</span>
                                    </div>
                                </div>
                            </td>
                            <td class="text-center">
                                <div class="btn-group">
                                    <a class="btn btn-primary" href="#"><i class="fa fa-pencil"></i></a>
                                    {#<a class="btn btn-success" href="#"><i class="icon_check_alt2"></i></a>#}
                                    <a class="btn btn-danger" href="#"><i class="fa fa-ban"></i></a>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </section>
{% endblock %}
{% block customScripts %}
    <script>
        $('#saveTask').on('click', function(){
            var title = $('#taskTitle').val();
            var dateFrom = $('#dateFrom').val();
            var dateTo = $('#dateTo').val();
            var description = $('#description').val();
            var employees = $('#employees').val();
            $.post("{{ path('json_tasks_add')}}", {title:title, dateFrom:dateFrom, dateTo:dateTo, description:description, employees:employees}, function(data){

            });

        });
    </script>
{% endblock %}
